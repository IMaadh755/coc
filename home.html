<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark SL</title>
    <link rel="icon" href="https://imaadh755.github.io/coc/DarkSL.png">
    <link rel="stylesheet" href="css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
        <!-- Other meta tags -->
    <link rel="manifest" href="json/manifest.json">
    <meta name="theme-color" content="#00ffcc">
</head>
<body>

<!-- Hero Section (Welcome message) -->
<div class="hero" id="hero">
    <div>
        <h1>Welcome to Dark SL</h1>
        <p>Your Ultimate Clan Experience</p>
    </div>
</div>

    <!-- Logo Section -->
    <div class="logo-container">
        <img src="https://imaadh755.github.io/coc/img/DarkSL.png" alt="Dark SL Logo" class="logo">
    </div>

    <!-- Toggle switch for Grid View -->
    <div class="view-toggle">
        <span class="toggle-text">Dark SL <br> Developed by IMaadh</span>
    </div>
    
<div id="install-prompt" class="install-prompt hidden">
    <div class="prompt-container">
        <img src="https://imaadh755.github.io/coc/img/DarkSL.png" alt="Dark SL Logo" class="prompt-logo">
        <p class="prompt-text">Add Dark SL to your Home Screen for a better experience!</p>
        <button id="install-button" class="install-button">Add to Home Screen</button>
        <button id="close-button" class="close-button">&times;</button>
    </div>
</div>

<!-- Search Bar -->
<div class="search-bar">
    <input type="text" id="search-input" placeholder="Search categories..." />
</div>

    <div class="container grid-view">
        <!-- Categories (keep the rest as is) -->
        
	<div class="category" onclick="openDirectPage('https://script.google.com/macros/s/AKfycbzSn1PgJSIXfIjvJyETNi7LzuXMQ1rTBoAQCwIbLgJ6RBaiFOABTtkECHtw4uXZPPtz/exec')">
            <img src="https://static.wikia.nocookie.net/clashofclans/images/4/49/Fireball_Equipment.png" alt="CWL Report">
            <p>CWL Report</p>
        </div>
	    <div class="category" onclick="openIframePage('src/strategies.html')">
            <img src="img/strategies.png" alt="Attack Strategies">
            <p>Attack Strategies</p>
        </div>
	   <div class="category" onclick="openIframePage('src/guide.html')">
            <img src="img/Rules.jpeg" alt="Clashofclan Layout">
            <p>Clan Rules</p>
        </div>
 <div class="category" onclick="openIframePage('https://www.clashofclans-layouts.com')">
            <img src="img/Base.jpeg" alt="Clashofclan Layout">
            <p>Base Layouts</p>
        </div>
        <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2qqqqUL9U')">
            <img src="img/members.jpeg" alt="Clan Members">
            <p>Clan Members</p>
        </div>
    <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2QQQQUL9U/currentwar')">
            <img src="img/War.jpeg" alt="War Status">
            <p>War Status</p>
        </div>
        <div class="category" onclick="openIframePage('https://www.warreport.app/#/clans/2QQQQUL9U/currentwar/warleague')">
            <img src="img/CWL.jpeg" alt="War League">
            <p>War League</p>
        </div>
        <div class="category" onclick="openDirectPage('https://store.supercell.com/clashofclans')">
            <img src="img/Gifts.jpeg" alt="Free Gifts">
            <p>Free Gifts</p>
        </div>
        <div class="category" onclick="openIframePage('https://supercell.com/en/games/clashofclans/blog/')">
            <img src="img/announcement.jpg" alt="Announcements">
            <p>Announcements</p>
        </div>
        <div class="category" onclick="openIframePage('src/Tips!.html')">
            <img src="img/tips.png" alt="Tips!">
            <p>Tips!</p>
        </div>
        <div class="category" onclick="openIframePage('src/Player Last Active.html')">
            <img src="img/last-active.jpeg" alt="Player Last Active">
            <p>Player Last Active</p>
        </div>
         <div class="category" onclick="openIframePage('src/War Troops Calculator.html')">
            <img src="img/Calculator.png" alt="War Troops Calculator">
            <p>War Troops Calculator</p>
        </div>
        <div class="category" onclick="openDirectPage('https://chat.whatsapp.com/HIDDfp0lZoJ0INgiywO1vN')">
            <img src="img/DarkSL.png" alt="WhatsApp Group">
            <p>Dark SL <br> WhatsApp Group</p>
        </div>
    </div>

    <script>
        /**
         * Opens a new tab with an iframe displaying the provided URL
         * @param {string} url - The URL to load in the iframe
         */
        function openIframePage(url) {
            const newTab = window.open();
            newTab.document.write(`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Content Viewer</title>
                    <style>
                        body {
                            margin: 0;
                            padding: 0;
                            overflow: hidden;
                        }
                        iframe {
                            width: 100vw;
                            height: 100vh;
                            border: none;
                        }
                    </style>
                </head>
                <body>
                    <iframe src="${url}" allowfullscreen></iframe>
                </body>
                </html>
            `);
        }

        /**
         * Opens a URL directly in a new tab without iframe
         * @param {string} url - The URL to open directly
         */
        function openDirectPage(url) {
            window.open(url, '_blank');
        }
    </script>
    
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('scipt/service-worker.js')
                .then(registration => {
                    console.log('Service Worker registered:', registration);
                })
                .catch(error => {
                    console.log('Service Worker registration failed:', error);
                });
        });
    }
</script>

    <script>
let deferredPrompt;

window.addEventListener('beforeinstallprompt', (event) => {
    event.preventDefault();
    deferredPrompt = event;
    document.getElementById('install-prompt').classList.remove('hidden');
});

document.getElementById('install-button').addEventListener('click', () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the install prompt');
            } else {
                console.log('User dismissed the install prompt');
            }
            deferredPrompt = null;
        });
    }
    document.getElementById('install-prompt').classList.add('hidden');
});

document.getElementById('close-button').addEventListener('click', () => {
    document.getElementById('install-prompt').classList.add('hidden');
});
</script>

<script>
// Search functionality
document.getElementById('search-input').addEventListener('input', function () {
    const query = this.value.toLowerCase();
    const categories = document.querySelectorAll('.category');

    categories.forEach(category => {
        const categoryText = category.querySelector('p').textContent.toLowerCase();
        if (categoryText.includes(query)) {
            category.style.display = 'block';
        } else {
            category.style.display = 'none';
        }
    });
});
</script>

<script>
    // Hide Hero Section after 5 seconds
    window.onload = function () {
        setTimeout(() => {
            document.getElementById('hero').classList.add('hidden');
        }, 3000);
    };
</script>

</body>
</html>
